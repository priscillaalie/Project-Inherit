extends layout

block css
    style
        include ../public/stylesheets/login.css


block content
    .container.fade-in(style={'background': 'url(https://images.unsplash.com/photo-1518893883800-45cd0954574b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1600&q=60) no-repeat center center fixed;', 'background-size': 'cover;'})
        .row
            .col-xs-12.col-sm-12.white.text-center
                h2.font-weight-bold Signup
                br
        .row
            .col

            .col-xs-12.col-sm-12.col-lg-6.col-xl-6.white
                div.container-fluid.formzone
                    form(method='POST' action='/signup')

                        div.form-group
                            .row
                                .col.col-lg-6.col-xl-6
                                    label.font-weight-bold(for='fname') First Name
                                    input#fname.form-control(type='text', placeholder='First Name*' name='fname', required)
                                .col-lg-6.col-xl-6
                                    label(for = 'lname').font-weight-bold Surname
                                    input#lname.form-control(type='text', placeholder='Surname*' name='lname', required)

                        br
                        div.form-group
                            .row
                                .col
                                    label(for='email').font-weight-bold Email
                                    input#email.form-control(type='email', placeholder='Email Address*' name='email', required)

                        br

                        div.form-group
                            .row
                                .col.col-lg-6.col-xl-6
                                    label(for='email').font-weight-bold Date of Birth
                                    input.form-control#dob(type='date', placeholder='22/07/2018' name='dob', max='2001-01-01', min='1930-01-01', required)
                                .col-lg-6.col-xl-6
                                    label(for = 'phone').font-weight-bold Phone Number
                                    input.form-control#phone(type='text', placeholder='Phone Number', name='phone')
                        br

                        div.form-group
                            .row
                                .col
                                    label(for='pw').font-weight-bold Password
                                    input#pw.form-control(type='password', onkeyup="checkPasswords();",
                                        placeholder='Password*' name='password', required)
                        br
                        div.form-group
                            .row
                                .col
                                    label(for='pw2').font-weight-bold Confirm Password
                                    input#pw2.form-control(type='password', onkeyup="checkPasswords();",placeholder='Retype Password*' name='confirmPassword',
                                        autocomplete='new-password', required)
                        br
                        .row
                            .col
                                p#pw_message(style="display: none; color: red; font-weight: bold;") Passwords do not match.

                        br
                        .form-group
                            .row
                                .col
                                    .form-check
                                        input#invalidCheck.form-check-input(type='checkbox' value='' required='')
                                        label.form-check-label(for='invalidCheck')
                                            | Agree to terms and conditions
                                        .invalid-feedback
                                            | You must agree before submitting.
                        br
                        .container.text-center


                            button.btn.btn-primary.page-button#submit(type='submit' data-loading-text=`<i class='fa fa-circle-o-notch fa-spin'></i> Processing Order` data-toggle='modal' data-target='#myModal') Sign Up

        script.
            $('.btn').on('click', function () {
                var $this = $(this);
                $this.button('loading');
                setTimeout(function () {
                    $this.button('reset');
                }, 8000);
            });

                            // Modal Success Popup
                            //#myModal.modal.fade.success-popup(tabindex='-1' role='dialog' aria-labelledby='myModalLabel')
                                .modal-dialog.modal-sm(role='document')
                                    .modal-content
                                        .modal-header
                                            button.close(type='button' data-dismiss='modal' aria-label='Close')
                                                span(aria-hidden='true') &times;
                                            h4#myModalLabel.modal-title Thank You !
                                        .modal-body.text-center
                                            img(src='http://osmhotels.com//assets/check-true.jpg')
                                            p.lead Contact form successfully submitted. Thank you, We will get back to you soon!
                                            a.rd_more.btn.btn-default(href='index.php') Go to Home


        script.
            (function () {
                'use strict';
                window.addEventListener('load', function () {
                    // Fetch all the forms we want to apply custom Bootstrap validation styles to
                    var forms = document.getElementsByClassName('needs-validation');
                    // Loop over them and prevent submission
                    var validation = Array.prototype.filter.call(forms, function (form) {
                        form.addEventListener('submit', function (event) {
                            if (form.checkValidity() === false) {
                                event.preventDefault();
                                event.stopPropagation();
                            }
                            form.classList.add('was-validated');
                        }, false);
                    });
                }, false);
            })();

            var checkPasswords = function () {
                if (document.getElementById('pw').value ==
                    document.getElementById('pw2').value) {
                    document.getElementById('submit').disabled = false;
                    document.getElementById('pw_message').style.display = 'none';
                } else {
                    document.getElementById('submit').disabled = true;
                    document.getElementById('pw_message').style.display = 'block';
                }
            }
        if (error)
            p#errormessage #{error}
            script.
                window.onload = function () {
                    document.getElementById('email').value = "#{email}";
                    document.getElementById('fname').value = "#{fname}";
                    document.getElementById('lname').value = "#{lname}";

                    document.getElementById('phone').value = "#{phone}";

                }

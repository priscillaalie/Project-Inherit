extends homepage.pug

block css
    style
        include ../public/stylesheets/homepage.css
        include ../public/stylesheets/family.css
    link(rel='stylesheet', href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css')

block content
    .container-fluid.fill-height.fade-in
        .row

            .col-xs-12.col-sm-12
                .row


                    .col
                    .col-xs-12.col-sm-12.col-md-8.col-lg-8.col-xl-8

                        if(session)
                            h2.text-center #{group.title}
                    .col.text-right




        .row

            .col-xs-12.col-sm-12.col-md-4.col-lg-3.col-xl-3
                nav-collapse.fixed-left.dropdown-menu-left
                    .vertical-menu.mr-4
                        br
                        .row
                            .col-2
                                i.material-icons keyboard_arrow_left
                            .col-10
                                a.tabstyle(href='/home') Back
                        hr.my-4

                        .row
                            .col
                                a.active(href = `/view/${group._id}/info` style = "font-weight: bolder; text-decoration: none;") About
                        br
                        .row
                            .col
                                a.tabstyle(href=`/view/${group._id}/post/`) Posts

                        br
                        .row
                            .col
                                a.tabstyle(href=`/view/${group._id}`) Artifacts

                        br
                        .row
                            .col
                                a.tabstyle(href = `/view/${group._id}/members`) Add Members
                        br
                        .row
                            .col


            .col-xs-12.col-sm-12.col-md-8.col-lg-9.col-xl-9.cardzone
                .row
                    .col-xs-12.col-sm-12.col-md-12.col-lg-12.col-xl-12

                        .comment-wrapper
                            .panel.panel-info(style="margin: 3px black;")
                                .row
                                    .col
                                        .panel-heading.font-weight-bold
                                            | Update Your Family
                                        br
                                        form(method = "POST" action = "/poststatus")
                                            textarea.form-control(placeholder='Create a Post...', rows='3', name = 'post')
                                        br
                                    .col-3.text-left
                                        img.text-left#previewpost(src=file, style="height:20px; width: 20px;")
                                .row
                                    .col-8.text-left
                                        input.custom-file-input#customFile(type='file' onchange='previewFile()' name = 'image' accept="image/*" style="width:50%;")
                                        label.custom-file-label(for='customFile') Upload Image (Optional)

                                    .col
                                        button.btn.btn-info.pull-right(type='submit' value = 'Submit') Post

                                    br
                                    hr.my-4



                                    br

                                    ul.media-list

                                    each post in posts

                                        li.media
                                            a.pull-left(href='#')
                                                img.img-circle(src=post.photo)
                                            .media-body

                                                strong.text-success #{post.ownername}
                                                span.text-muted.pull-right
                                                    small.text-muted #{post.created}
                                                    if (user._id == post.owner)
                                                        a(href = `/deletepost/${post._id}`)
                                                            button.btn(onclick="return confirm('Are you sure? This action cannot be undone')")
                                                                i.fa.fa-trash
                                                strong.text-success #{post.ownername}

                                                p
                                                    | #{post.content}

                                                hr.my-4

            // upload image for create group
    script.
        function previewFile() {
            var previewpost = document.querySelector('img');
            var file = document.querySelector('input[type=file]').files[0];
            var reader = new FileReader();

            reader.addEventListener("load", function (e) {
                //document.getElementById("b64").innerHTML = e.target.result;
                previewpost.src = reader.result.toString();
                document.getElementById('b64').value = e.target.result;
            }, false);

            if (file) {
                reader.readAsDataURL(file);
            }
        }

